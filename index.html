<!DOCTYPE html>
<html lang="en-US"><head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>

    <title>Error Handling Isn't All About Errors</title>

    <link href="dist/reset.css" rel="stylesheet"/>
    <link href="dist/reveal.css" rel="stylesheet"/>
    <link href="dist/theme/rustconf.css" id="theme" rel="stylesheet"/>
    <link href="plugin/highlight/rustconf.css" id="highlight-theme" rel="stylesheet"/>
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/9144026ed3.js"></script>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section><div class="slide-wrapper">
<h1>Error Handling Isn't All About Errors</h1>
<p><span class="author">Jane Lusby</span></p>
<p><i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a></p>
<aside class="notes"><p>Hello and welcome to my talk, error handling isn't all about errors.</p>

</aside></div></section>
<section class="center"><div class="slide-wrapper">
<h2>About Me</h2>
<aside class="notes"><p>I am the author of eyre, a fork of anyhow with support for customized
error reports, and color-eyre, which provides a custom panic hook and a
custom eyre report hook and lets you construct error reports like this.</p>
<div class="next-slide"><p>Next slide: Show the various usage examples from <code>color-eyre</code>.</p></div>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run --example usage
Error:
   0: <font color="#F15D22">Unable to read config</font>
   1: <font color="#F15D22">No such file or directory (os error 2)</font>

  ━━━━━━━━━━━━━━━━━━━━━━━━━━━ SPANTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━

   0: <font color="#F15D22">usage::read_file</font> with <font color="#34E2E2">path="fake_file"</font>
      at <font color="#75507B">examples/usage.rs</font>:<font color="#75507B">32</font>
   1: <font color="#F15D22">usage::read_config</font>
      at <font color="#75507B">examples/usage.rs</font>:<font color="#75507B">38</font>

<font color="#34E2E2">Suggestion</font>: try using a file that exists next time

Backtrace omitted.
Run with RUST_BACKTRACE=1 environment variable to display it.
Run with RUST_BACKTRACE=full to include source snippets.</pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> RUST_BACKTRACE=1 cargo run --example usage
// ...
  ━━━━━━━━━━━━━━━━━━━━━━━━━━━ BACKTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━
  <font color="#34E2E2">                       ⋮ 5 frames hidden ⋮                       </font>
   6: <font color="#F15D22">usage::read_file</font><font color="#88807C">::h10b2389c2b814452</font>
      at <font color="#75507B">/home/jlusby/git/yaahc/color-eyre/examples/usage.rs</font>:<font color="#75507B">35</font>
   7: <font color="#F15D22">usage::read_config</font><font color="#88807C">::hf7150b146edb25d9</font>
      at <font color="#75507B">/home/jlusby/git/yaahc/color-eyre/examples/usage.rs</font>:<font color="#75507B">40</font>
   8: <font color="#F15D22">usage::main</font><font color="#88807C">::hc3df11a6ea0d044d</font>
      at <font color="#75507B">/home/jlusby/git/yaahc/color-eyre/examples/usage.rs</font>:<font color="#75507B">11</font>
  <font color="#34E2E2">                      ⋮ 10 frames hidden ⋮                       </font>
// ...
Run with RUST_BACKTRACE=full to include source snippets.</pre>
<aside class="notes"><div class="next-slide"><p>Next slide: we can also filter our backtrace frames, note that here there are 10 frames hidden after main...</p></div>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> RUST_BACKTRACE=1 cargo run --example custom_filter
// ...
  ━━━━━━━━━━━━━━━━━━━━━━━━━━━ BACKTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━
  <font color="#34E2E2">                       ⋮ 5 frames hidden ⋮                       </font>
   6: <font color="#F15D22">custom_filter::read_file</font><font color="#88807C">::h0afee8fe0960bf02</font>
      at <font color="#75507B">/home/jlusby/git/yaahc/color-eyre/examples/custom_filter.rs</font>:<font color="#75507B">53</font>
   7: <font color="#F15D22">custom_filter::read_config</font><font color="#88807C">::h6622065848c69b29</font>
      at <font color="#75507B">/home/jlusby/git/yaahc/color-eyre/examples/custom_filter.rs</font>:<font color="#75507B">58</font>
  <font color="#34E2E2">                      ⋮ 11 frames hidden ⋮                       </font>
// ...
Run with RUST_BACKTRACE=full to include source snippets.</pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run --example custom_section
Error:
   0: <font color="#F15D22">Unable to read config</font>
   1: <font color="#F15D22">cmd exited with non-zero status code</font>

Stderr:
   cat: fake_file: No such file or directory

  ━━━━━━━━━━━━━━━━━━━━━━━━━━━ SPANTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━

   0: <font color="#F15D22">custom_section::output2</font> with <font color="#34E2E2">self="cat" "fake_file"</font>
      at <font color="#75507B">examples/custom_section.rs</font>:<font color="#75507B">14</font>
   1: <font color="#F15D22">custom_section::read_file</font> with <font color="#34E2E2">path="fake_file"</font>
      at <font color="#75507B">examples/custom_section.rs</font>:<font color="#75507B">58</font>
   2: <font color="#F15D22">custom_section::read_config</font>
      at <font color="#75507B">examples/custom_section.rs</font>:<font color="#75507B">63</font></pre>
<aside class="notes"><p>We will dig into this example more later...</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run --example multiple_errors
Error:
   0: <font color="#F15D22">encountered multiple errors</font>

Error:
   0: <font color="#F15D22">The task could not be completed</font>
   1: <font color="#F15D22">The task you ran encountered an error</font>

Error:
   0: <font color="#F15D22">The machine is unreachable</font>
   1: <font color="#F15D22">The machine you're connecting to is actively on fire</font>

Error:
   0: <font color="#F15D22">The file could not be parsed</font>
   1: <font color="#F15D22">The file you're parsing is literally written in c++ instead of rust, what the hell</font></pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run --example panic_hook
<font color="#CC0000">The application panicked (crashed).</font>
Message:  <font color="#06989A">some real basic stuff went wrong</font>
Location: <font color="#75507B">examples/panic_hook.rs</font>:<font color="#75507B">14</font>

  ━━━━━━━━━━━━━━━━━━━━━━━━━━━ SPANTRACE ━━━━━━━━━━━━━━━━━━━━━━━━━━━

   0: <font color="#F15D22">panic_hook::do_thing</font> with <font color="#34E2E2">thing=42</font>
      at <font color="#75507B">examples/panic_hook.rs</font>:<font color="#75507B">12</font>

Backtrace omitted.
Run with RUST_BACKTRACE=1 environment variable to display it.
Run with RUST_BACKTRACE=full to include source snippets.</pre>
<aside class="notes"><p>I'm giving this talk to share what I learned in the process of
developing eyre and how it has changed how I look at error handling and error
reporting.</p>
<div class="next-slide"><p>Next slide: But before we get into the details of reporting lets first cover
error handling at large.</p></div>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>What Is Error Handling?</h2>

<ul>
<li class="fragment"><del>Annoying</del></li>
<li class="fragment">Defining errors</li>
<li class="fragment">Propagating errors and gathering context</li>
<li class="fragment">Reacting to specific errors</li>
<li class="fragment">Discarding errors</li>
<li class="fragment">Reporting errors and gathered context</li>
</ul>
<aside class="notes"><p>A lot of things, when you zoom in close</p>
<p>don't mention the annoying, just keep going</p>
<p>The breakdown here gets to the goal of my talk. I have a theory that
error handling is made more confusing by people try to simplify it, because,
among other things, error handling is annoying. I worry that the fuzziness
between these different responsibilities makes it hard for people to infer
what tools they should be using when "handling errors".</p>
<div class="next-slide"><p>Next slide: Okay now talk about fundamentals..</p></div>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section class="title-card" data-state="purple"><div class="slide-wrapper">
<h1>Recoverable<br/> vs<br/> Non-Recoverable</h1>
<aside class="notes"><p>The Rust model for errors distinguishes between two classes of errors.</p>
<p>Recoverable errors are errors you can reasonably expect to occur during execution of…, can be handled, or reported.</p>
<p>Unrecoverable errors are bugs, can’t be handled, only reported before exiting the program / thread</p>
<p>Most languages dont distinguish between these kinds of errors</p>
<p>C++ has exceptions</p>
<p>Rust doesnt</p>
<p>Rust has panic for unrecoverable errors and result recoverable errors</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Panic</h2>
<pre><code class="language-rust" data-line-numbers="" data-noescape="">// if the index is past the end of the slice
} else if self.end &gt; slice.len() {
    panic!(
        "index {} out of range for slice of length {}",
        self.end,
        slice.len()
    );
}
</code></pre>
<aside class="notes"><p>Unrecoverable errors in rust are created via the <code>panic!</code> macro. Here we can see an example of an index out of bounds error. NEXT SLIDE</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Panic</h2>
<pre><code class="language-rust" data-line-numbers="4" data-noescape="">// if the index is past the end of the slice
} else if self.end &gt; slice.len() {
    panic!(
        "index {} out of range for slice of length {}",
        self.end,
        slice.len()
    );
}
</code></pre>

<ul>
<li class="fragment">Only input is an error message and optional some context</li>
<li class="fragment">Reporting and default context gathering done by panic hook</li>
<li class="fragment">Cleans up either by unwinding or aborting</li>
</ul>
<aside class="notes"><p>Mention it can be typed but its out of the scope of this talk</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Result</h2>
<pre><code class="language-rust" data-noescape="">enum Result&lt;T, E&gt; {
    /// Contains the success value
    Ok(T),
    /// Contains the error value
    Err(E),
}
</code></pre>
<aside class="notes"><p>Rust models recoverable errors with <code>Result&lt;T, E&gt;</code>. There’s very little syntax sugar involved for recoverable errors in rust, they’re just values and they’re implemented as a library feature.</p>
<p>You use result for functions where you want to return either a value or an error</p>
<p>When you want to return an error you change the return type</p>
<p>The big advantage of using enums is we must handle all errors.</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Try and <code>?</code></h2>
<pre><code class="language-rust left" data-line-numbers="1-4|8" data-noescape="">let config = match get_config() {
    Ok(success_value) =&gt; success_value,
    Err(error_value) =&gt; return Err(Error::from(error_value)),
};

// vs

let config = get_config()?;
</code></pre>
<aside class="notes"><p>The try trait models fallible operations
Result is a “Try Type”
Abstraction over error propagation</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>The Error Trait</h2>

<ul>
<li class="fragment">Handling for an open set of errors</li>
<li class="fragment">Reporting for all errors</li>
<li class="fragment">limited amount of context is accessible</li>
</ul>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section class="title-card" data-state="purple"><div class="slide-wrapper">
<h1>The error trait provides an interface <em>for</em> reporters.</h1>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><style>
.container{
    display: flex;
}
.col{
    flex: 1;
}
</style>
<div class="container">
<div class="col">
 Recoverable

<ul>
<li class="fragment">Defining
<ul>
<li class="fragment">types and traits</li>
</ul>
</li>
<li class="fragment">Propagating
<ul>
<li class="fragment"><code>?</code></li>
</ul>
</li>
<li class="fragment">Matching and Reacting
<ul>
<li class="fragment"><code>match</code> and <code>downcast</code></li>
</ul>
</li>
<li class="fragment">Discarding
<ul>
<li class="fragment">explicit drop</li>
</ul>
</li>
<li class="fragment">Reporting
<ul>
<li class="fragment">Reporting types</li>
</ul>
</li>
</ul>
</div>
<div class="col">
Unrecoverable

<ul>
<li class="fragment">Defining
<ul>
<li class="fragment"><code>panic!</code></li>
</ul>
</li>
<li class="fragment">Propagating
<ul>
<li class="fragment">builtin</li>
</ul>
</li>
<li class="fragment">Matching and Reacting
<ul>
<li class="fragment">pls don’t</li>
</ul>
</li>
<li class="fragment">Discarding
<ul>
<li class="fragment"><code>catch_unwind</code></li>
</ul>
</li>
<li class="fragment">Reporting
<ul>
<li class="fragment">panic hook</li>
</ul>
</li>
</ul>
</div>
</div>
<aside class="notes"><p>Okay so now we’ve covered the fundamentals, you know how to handle errors of both types, so let’s get back and start digging into the differences between errors, context, and reports.</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Definitions</h2>

<ul>
<li class="fragment"><strong>Error</strong>: A description of why an operation failed</li>
<li class="fragment"><strong>Context</strong>: Any information relevant to an error or an error report that is not itself an error</li>
<li class="fragment"><strong>Error Report</strong>: Printed representation of an error and all of its associated context</li>
</ul>
<aside class="notes"><p>This is in the context of reporting, we will no longer talk about handling.</p>
<p>This gets to the goal of this talk, the relationship and difference between
errors and context. Errors describe what went wrong, context helps you figure
out the why, and it's my opinion that keeping these two concepts in mind when
designing your error handling is an important step in designing clean error
reporting.</p>
<p>How about an example? Let's dig into error reporting by recreating the
custom_section example from the beginning of the talk. NEXT SLIDE</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<pre><code class="language-rust" data-line-numbers="1-3|5|7|9-10|12|13|15" data-noescape="">trait CommandExt {
    fn output2(&amp;mut self) -&gt; Result&lt;String, eyre::Report&gt;;
}

impl CommandExt for std::process::Command {
    fn output2(&amp;mut self) -&gt; Result&lt;String, eyre::Report&gt; {
        let output = self.output()?;

        let stdout = String::from_utf8_lossy(&amp;output.stdout)
            .into_owned();

        if !output.status.success() {
            Err(eyre!("command exited unsuccessfully"))
        } else {
            Ok(stdout)
        }
    }
}
</code></pre>
<aside class="notes"><p>lets start with a customized version of <code>Command::output</code> that reports
better errors and converts stdout to a String on success.</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run
Error:
   0: <font color="#F15D22">command exited unsuccessfully</font></pre>
<aside class="notes"><p>This is an Error.</p>
<p>okay, thats not very helpful, also I didn't even tell you what command I was running</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<pre><code class="language-rust" data-line-numbers="8|11" data-noescape="">impl CommandExt for std::process::Command {
    fn output2(&amp;mut self) -&gt; Result&lt;String, eyre::Report&gt; {
        let output = self.output()?;

        let stdout = String::from_utf8_lossy(&amp;output.stdout).into_owned();

        if !output.status.success() {
            let cmd = format!("{:?}", self);

            Err(eyre!("command exited unsuccessfully"))
                .section(cmd.header("Command:"))
        } else {
            Ok(stdout)
        }
    }
}
</code></pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run
Error:
   0: <font color="#F15D22">command exited unsuccessfully</font>

Command:
   "git" "cat"</pre>
<aside class="notes"><p>Here we can see why the command failed, cat isn't a real git command! It would be cool if it was though.</p>
<p>This is context, and the whole thing is a report.</p>
</aside></div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<pre><code class="language-rust left" data-line-numbers="" data-noescape="">fn main() -&gt; Result&lt;(), eyre::Report&gt; {
    color_eyre::install()?;

    let _ = std::process::Command::new("git")
        .arg("cat")
        .output2()?;

    Ok(())
}

</code></pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<pre><code class="language-rust left" data-line-numbers="7" data-noescape="">fn main() -&gt; Result&lt;(), eyre::Report&gt; {
    color_eyre::install()?;

    let _ = std::process::Command::new("git")
        .arg("cat")
        .output2()?
        .wrap_err("cat could not be got")?;

    Ok(())
}
</code></pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#CC0000"><b>❯</b></font> cargo run
Error:
   0: <font color="#F15D22">cat could not be got</font>
   1: <font color="#F15D22">command exited unsuccessfully</font>

Command:
   "git" "cat"

</pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<pre><code class="language-rust" data-line-numbers="9|13-14" data-noescape="">impl CommandExt for std::process::Command {
    fn output2(&amp;mut self) -&gt; Result&lt;String, eyre::Report&gt; {
        let output = self.output()?;

        let stdout = String::from_utf8_lossy(&amp;output.stdout).into_owned();

        if !output.status.success() {
            let cmd = format!("{:?}", self);
            let stderr = String::from_utf8_lossy(&amp;output.stderr).into_owned();

            Err(eyre!("command exited unsuccessfully"))
                .section(cmd.header("Command:"))
                .section(stdout.header("Stdout:"))
                .section(stderr.header("Stderr:"))
        } else {
            Ok(stdout)
        }
    }
}
</code></pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper"><pre class="term"><font color="#4E9A06"><b>❯</b></font> cargo run
Error:
   0: <font color="#F15D22">cat could not be got</font>
   1: <font color="#F15D22">command exited unsuccessfully</font>

Command:
   "git" "cat"

Stderr:
   git: 'cat' is not a git command. See 'git --help'.

   The most similar commands are
   	clean
   	mktag
   	stage
   	stash
   	tag
   	var</pre>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Libraries</h2>

<ul>
<li class="fragment">Defining =&gt; thiserror, displaydoc, SNAFU</li>
<li class="fragment">Defining ad-hoc errors + Reporting =&gt; anyhow, eyre</li>
<li class="fragment">Report Hooks =&gt; color-eyre, color-backtrace, color-anyhow (soon tm)</li>
<li class="fragment">Propagation =&gt; fehler</li>
<li class="fragment">Context Capture =&gt; tracing-error, extracterr</li>
</ul>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Common Concerns</h2>
<ul>
<li>Open Set vs Closed Set</li>
<li>Stack Size</li>
<li>Unreportable Errors</li>
</ul>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h2>Reporters</h2>
<ul>
<li>Reporters usually impl <code>From&lt;E: Error&gt;</code> and <em>don't</em> impl <code>Error</code></li>
<li>Prints report via <code>Debug</code> trait</li>
</ul>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
<section><div class="slide-wrapper">
<h1>Fin</h1>
</div><div class="slide-footer">
<div class="slide-footer-left">Jane Lusby</div>
<div class="slide-footer-right">
<i class="fa-twitter fab"></i> <a href="https://twitter.com/yaahc_">@yaahc_</a> / <a href="https://yaah.dev/">yaah.dev</a>
</div>
</div></section>
        </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/highlight/rust.js"></script>
    <script src="plugin/highlight/shell.js"></script>
    <script>
        Reveal.initialize({
            width: 960,
            height: 540,
            hash: true,
            controls: false,
            progress: false,
            showNotes: true,
            transition: 'none',
            /* vertical- */ center: false,
            markdown: {
                smartypants: true,
            },
            plugins: [RevealMarkdown, HighlightRustCompiler, HighlightShellSession, RevealHighlight, RevealNotes]
        });
    </script>


</body></html>
